{% extends 'base.html' %}
{% load static %}
{% block body_class %}coefficient-list-bg{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/backgrounds.css' %}">
{% endblock %}

{% block title %}Karbon Katsayı Listesi{% endblock %}

{% block content %}
<h1>Karbon Katsayı Listesi</h1>

<div style="margin-bottom: 20px;">
    <a href="{% url 'carbon:coefficient-create' %}" style="padding: 10px 20px; background-color: #28a745; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">
        + Yeni Katsayı Ekle
    </a>
</div>

<div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f8f9fa;">
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: left;">Kapsam</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: left;">Alt Kapsam</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: left;">Katsayı Türü</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: left;">İsim</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: right;">Değer</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: left;">Birim</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: center;">Geçerlilik</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: center;">Durum</th>
                <th style="border: 1px solid #dee2e6; padding: 10px; text-align: center;">İşlemler</th>
            </tr>
        </thead>
        <tbody>
            {% for coefficient in coefficients %}
            <tr>
                <td style="border: 1px solid #dee2e6; padding: 10px;">{{ coefficient.get_scope_display }}</td>
                <td style="border: 1px solid #dee2e6; padding: 10px;">{{ coefficient.get_subscope_display }}</td>
                <td style="border: 1px solid #dee2e6; padding: 10px;">{{ coefficient.get_coefficient_type_display }}</td>
                <td style="border: 1px solid #dee2e6; padding: 10px;">
                    <strong>{{ coefficient.name }}</strong>
                </td>
                <td style="border: 1px solid #dee2e6; padding: 10px; text-align: right;">{{ coefficient.value }}</td>
                <td style="border: 1px solid #dee2e6; padding: 10px;">{{ coefficient.unit }}</td>
                <td style="border: 1px solid #dee2e6; padding: 10px; text-align: center;">
                    {{ coefficient.valid_from|date:"d.m.Y" }}
                    {% if coefficient.valid_to %}
                        - {{ coefficient.valid_to|date:"d.m.Y" }}
                    {% else %}
                        - <span style="color: green;">Süresiz</span>
                    {% endif %}
                </td>
                <td style="border: 1px solid #dee2e6; padding: 10px; text-align: center;">
                    {% if coefficient.is_active %}
                        <span style="color: green;">✓ Aktif</span>
                    {% else %}
                        <span style="color: red;">✗ Pasif</span>
                    {% endif %}
                </td>
                <td style="border: 1px solid #dee2e6; padding: 10px; text-align: center; white-space: nowrap;">
                    <a href="{% url 'carbon:coefficient-update' coefficient.pk %}" style="color: #007bff; text-decoration: none;">Düzenle</a>
                    |
                    <a href="{% url 'carbon:coefficient-delete' coefficient.pk %}" style="color: #dc3545; text-decoration: none;">Sil</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="9" style="border: 1px solid #dee2e6; padding: 20px; text-align: center; color: #6c757d;">
                    Henüz katsayı tanımlanmamış. Yeni katsayı eklemek için yukarıdaki butonu kullanın.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div style="margin-top: 20px; padding: 15px; background-color: #e9ecef; border-radius: 5px;">
    <p style="margin: 0; color: #6c757d;">
        <strong>Toplam {{ coefficients|length }} katsayı listeleniyor.</strong>
    </p>
</div>
{% endblock %}