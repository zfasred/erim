{% extends 'base.html' %}

{% block title %}Karbon Yönetim - Ekonaz Portal{% endblock %}

{% block content %}
<h1>Karbon Yönetim</h1>

<h2>Emisyon Faktörleri</h2>
<a href="{% url 'carbon:emissionfactor-create' %}" role="button">Yeni Emisyon Faktörü Ekle</a>

<table>
    <thead>
        <tr>
            <th>Adı</th>
            <th>Kategori</th>
            <th>Değer</th>
            <th>İşlemler</th>
        </tr>
    </thead>
    <tbody>
        {% for factor in factors %}
        <tr>
            <td>{{ factor.name }}</td>
            <td>{{ factor.get_category_display }}</td>
            <td>{{ factor.value }}</td>
            <td>
                <a href="{% url 'carbon:emissionfactor-update' factor.pk %}">Düzenle</a> |
                <a href="{% url 'carbon:emissionfactor-delete' factor.pk %}">Sil</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">Henüz emisyon faktörü tanımlanmamış.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if user_firm_form %}
<h2>Kullanıcı-Firma İlişkilendirme</h2>
<form method="post">
    {% csrf_token %}
    {{ user_firm_form.as_p }}
    <button type="submit">İlişkilendir</button>
</form>
{% endif %}
{% endblock %}